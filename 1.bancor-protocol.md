# bancor去中心化交易所解析（1）bannor协议
## 概念区分
这次介绍的去中心化交易所叫做bancor，bancor交易所是一个基于bancor协议的去中心化交易所。可能第一次看到这的时候有些人会晕掉，怎么会有那么多个bancor😓，首先跟大家介绍下这几者的关系
### bancor交易所 https://www.bancor.network/
bancor交易所是基于bancor协议的一个去中心化交易所（当然也包含有中心化的部分），其基于bancor协议，能自动定价，一键转化在bancor网络上的两种币。
注意：这个交易所并不属于bancor协议的一部分。
下面是截止到发稿日，bancor在dappradar上的排名情况
![image.png](https://upload-images.jianshu.io/upload_images/13856335-964d01a0a019038a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

### Bancor 协议

它是在1940年-1942年间由凯恩斯、舒马赫提出的一个超主权货币的概念，可作为一种账户单位用于国际贸易中，并由英国在二战后正式提出。然而，由于美国实力在二战后一枝独秀，Bancor 方案并没有在布雷顿森林会议上被采纳使用。但应用这一思想的 Bancor 算法则继续延续了其生命力。Bancor 算法由 Bancor Network 项目（上面提到的那个交易所属于这个项目）提出应用，旨在采用公式来设定好数字资产间的兑换价格。

### Bancor 智能代币

Bancor 智能代币”是一种标准 ERC20 代币，它们的主要作用就在于实施Bancor协议， 自动促进价格发现并提供持续的流动性。“智能代币”内置的智能合约即时处理 买卖指令，从而推动价格发现进程。由于具备这种能力，“智能代币”不用上交 易所进行交易即可获取流动性。
“智能代币”持有至少一种其它代币。这种被“智能代币”持有的代币称为 “准备金”。这些“准备金”可能是 ETH、任何 ERC20 标准代币或其它“智能代 币”。
“智能代币”将在获得支付时发行，而在被清算时销毁。可以使用其“准备 金代币”购买“智能代币”;也可以把“智能代币”清算为它的“准备金代币”。 这些购买或清算以当前即时价格为准。

### BNT

Bancor(中文名：班科，英文名：Bancor，缩写：BNT）协议是一个基于区块链技术的体统，它是一个支持多种智能合约平台的流动性机制。这些区块链技术的灵活性允许在Bancor系统上进行代币锁仓，发布智能代币，让任何人能够立即购买或者清算任何交易所锁仓的智能代币。

简单来说就是Bancor Network 项目发行的token的，是第一个基于bancor协议的智能代币，它以Ether作为单个保证金。其他的代币，通过使用BNT作为它们的保证金之一，连接到BNT网络上。BNT建立起来的网络能够促进任一其他网络代币对于BNT的需求增加，使得它们把BNT作为保证金。

## 协议解析

### 背景

随着区块链的日趋普及，大大降低了大众发行货币的成本。不同的加密货币因为解决不同的现实需求，被纷纷创造出来。但是在主流交易所要交换两种加密货币，就必须有买有卖，也就是`双重需求巧合问题`。对于市值大，知名度高的币种当然没什么问题。但是对于新项目小币种，由于知名度小，`双重需求巧合问题`就凸显出来了。

由此造成的现象就是排名前10% 的代币占整个代币市场市值的95%，占所有代币交易量的99%（基于对CoinMarketCap 上列出的1000 多个代币的分析）。尾部的（即剩下的90%）代币几乎无足轻重。这就是`长尾效应`

Bancor协议就是为了解决这个问题创造出来的,  下面就来看看他是怎么做到的

### 内容

Bancor Network项目组通过代码实现和升级了Bancor的设计理念。他的最完美最终形态，能实现货币的自动定价。你随便给我一个币，然后我会根据我篮子里面你这种币的储备量给你定价卖一种智能代币给你, 然后在经由智能代币转化到你的目标货币。然后因为篮子里的货币是铁索连舟连在一起的，并且是根据供需达成的人机交易公式定价，既没有利用竞价规则炒作的风险，也没有任何空手套白狼的做多做空工具。简单理解就是一个自动市商。

### 智能代币

`智能代币`（smart token）是一种兼容ERC20的新的代币类型, 是bancor协议的核心

* 连续流动性 用户总能通过智能合约在网络中直接购买或出售代币， 智能代币是能自动增加和减少合约中的`总供应量`(totalSupply)，从而导致他的价格发生变化，当总供应量越来越大时，那么价格会越来越贵。（重要）

* 没有内置手续费

* 可调整的价格敏感度

* 没有价差

* 价格可预测

### 基本公式
（以下内容，均来着bancor白皮书）
 算法定价公式是系统设计和潜力的核心，因为它使得智能代币 始终能够确定自身可靠的、可预测的价格，这对大规模采用代币而言至关重 要。该公式建立在一个概念上，即前一节中介绍过的:每个智能代币都会在 智能代币的总价值(其供应量  单价)和对应连接器的余额之间维持一个比率。我们称这个比率为连接器权重，简称CW 。

![image.png](https://upload-images.jianshu.io/upload_images/13856335-295aac50e4e9b5b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

智能代币的总价值，即它的市值，表示的是以当前价格出售所有代币 (全部智能代币供应量)所能获得的金额。智能代币的价格按照连接器的代
币计价(例如， 的价格以  计价， 是其连接器的代币)。

这些关系是  定价算法的关键，因为它们允许系统使用代数方法 解决智能代币的定价，其价格由 、连接器代币余额、以及智能代币结余 供应量所决定。![image.png](https://upload-images.jianshu.io/upload_images/13856335-d1110ea72138f50d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

在任何给定的时间，每个连接器总是精准地记录着它的连接器代币余 额以及当前的智能代币的供应量，所以它只需要知道  就可以在连接器 余额变化时以及其代币供应量变化时持续计算出正确的智能代币价格。 表达为介于  与  之间一个百分数，如前文所述， 的初始值是在 配置智能代币之初由代币创建者指定的。 的值明显影响代币的定价，且 可以修改，取决于智能代币的设定。

因为这个设定，我们可以得知CW越小，他的价格波动就会越大，同时CW也是锚定代币价格一个重要的参数

![image.png](https://upload-images.jianshu.io/upload_images/13856335-9491e6df5958443d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

总结：简单理解，bancor协议就是通过一定的公式描述了供求关系与价格的变化 。在CW非100的情况下，连接器代币储备量上升，代币单价就会上升（也就是用连接器代币去买智能代币时，智能代币价格就会上升），反之则相反.

## 总结

这篇文章主观性的东西并不多，很多都是抄自白皮书的内容, 只是截取了一些我认为非常重要的概念，记住这些概念对于接下来我们去了解bancor交易所是怎么运作的，非常重要!
